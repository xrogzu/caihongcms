<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
<title>会员中心 - ${site.name} </title>
<style type="text/css"></style>
<link rel="stylesheet" href="${resSys}/photo/linkstyle.css"/>
  <script src="${resSys}/jquery.js"></script>
  <script src="${resSys}/photo/clamp.min.js"></script>
</head>

<body>
<div class="row">
        					<div class="container">
 <!--    照片添加    -->
<div class="z_photo">
            <div class="z_file">
                <input type="file" name="file" id="file" value="" accept="image/*" multiple onchange="imgChange('z_photo','z_file');" />
            </div>
        </div>

        <!--遮罩层-->
        <div class="z_mask">
            <!--弹出框-->
            <div class="z_alert">
                <p>确定要删除图片？</p>
                <p>
                    <span class="z_cancel">取消</span>
                    <span class="z_sure">确定</span>
                </p>
            </div>
 </div>
</div>
</div>

<script src="${resSys}/photo/normal-js.js"></script>


 <script>
 $(function() {
	var oWidth=$(".z_photo").outerWidth()*0.5-5;
    $(".z_file").css({"height":oWidth+'px',"width":oWidth+'px'});
});
 function imgChange(obj1, obj2) {
     //获取点击的文本框
     var file = document.getElementById("file");
     //存放图片的父级元素
     var imgContainer = document.getElementsByClassName(obj1)[0];
     //获取的图片文件
     var fileList = file.files;
     //文本框的父级元素
     var input = document.getElementsByClassName(obj2)[0];
     var imgArr = [];
     //遍历获取到得图片文件
     for (var i = 0; i < fileList.length; i++) {
     
         var imgUrl = window.URL.createObjectURL(file.files[i]);
         imgArr.push(imgUrl);
         var img = document.createElement("img");
         img.setAttribute("src", imgArr[i]);
         
         img.style.height=($(".z_photo").outerWidth()*0.25-5)+'px';
         var imgAdd = document.createElement("div");
         var iconAdd = document.createElement("img");
         iconAdd.setAttribute("src", "${resSys}/img/cancel_icon.png");
         iconAdd.setAttribute("class", "z_iconImg");
         
         imgAdd.setAttribute("class", "z_addImg");
         imgAdd.appendChild(img);
         imgAdd.appendChild(iconAdd);
         imgContainer.appendChild(imgAdd);
         $(".z_file").appendTo(".z_photo");
         if($(".z_addImg").length>3){
         	$(".z_file").hide();
         }
     };
     imgRemove();
 };
 
 /*删除图片*/
 function imgRemove() {
     var imgList = document.getElementsByClassName("z_addImg");
     var mask = document.getElementsByClassName("z_mask")[0];
     var cancel = document.getElementsByClassName("z_cancel")[0];
     var sure = document.getElementsByClassName("z_sure")[0];
     for (var j = 0; j < imgList.length; j++) {
         imgList[j].index = j;
         imgList[j].onclick = function() {
             var t = this;
             mask.style.display = "block";
             cancel.onclick = function() {
                 mask.style.display = "none";
             };
             sure.onclick = function() {
                 mask.style.display = "none";
                 t.style.display = "none";
             };
             if($(".z_addImg").length>3){
         	    $(".z_file").show();
             }
         }
     };
 };
</script>      


</body>
</html>
